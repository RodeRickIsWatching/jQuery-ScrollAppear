/*
* jQuery ScrollAppear 0.9 
* Copyright (c) 2012 Dom Sammut
* Licensed under the MIT license (http://www.opensource.org/licenses/mit-license.php)
*
* Requires jQuery v 1.7.0 +
* Documentation at http://www.domsammut.com
*/

(function($){"use strict";var f={init:function(a){var b=$.prototype.extend({AddClass:'scrollshow',DelayEffect:0,EffectDuration:'fast',ElementAffect:'div',ElementsToShow:3,NumberOfScrolls:100,PixelOffset:0,Timeout:1000,TriggerIntent:true,TriggerType:'scroll'},a);f.settings=b;f.settings.t=$(this);f.BindEvent();f.GatherElements();return this},InternalSettings:{counter:0,ShowElements:[],BoolTimeout:false,NumOfEl:0},BindEvent:function(){$(window).on(f.settings.TriggerType,function(e){e.stopImmediatePropagation();f.CheckScroll()});return this},UnbindEvent:function(){$(window).off(f.settings.TriggerType);return this},ResetCounter:function(){f.InternalSettings.counter=0;return this},GatherElements:function(){this.el=$(f.settings.ElementAffect);for(this.g=0;this.g<this.el.length;this.g+=1){if(f.CheckClassArray(this.el[this.g])===false){f.InternalSettings.ShowElements.push(this.el[this.g])}}f.InternalSettings.ResetElements=f.InternalSettings.ShowElements.slice();f.InternalSettings.NumOfEl=f.InternalSettings.ShowElements.length;return this},CheckCount:function(){if(f.InternalSettings.ShowElements.length>1){if(f.InternalSettings.counter<=f.settings.NumberOfScrolls){return true}}return false},CheckScroll:function(){if(f.InternalSettings.BoolTimeout===false){if(f.CheckCount()===true){if(f.GetElementPosition()===true){f.InternalSettings.BoolTimeout=true;f.ShowElements();setTimeout(function(){f.InternalSettings.BoolTimeout=false;if(f.settings.TriggerIntent===true){f.CheckScroll()}},f.settings.Timeout)}}}},ShowElements:function(){if(f.CheckCount()===true){var a=0;while(a<f.settings.ElementsToShow){$(f.InternalSettings.ShowElements[a]).hide();$(f.InternalSettings.ShowElements[a]).addClass(f.settings.AddClass);$(f.InternalSettings.ShowElements[a]).delay(a*f.settings.DelayEffect).fadeIn(f.settings.EffectDuration);a+=1}f.InternalSettings.ShowElements.splice(0,f.settings.ElementsToShow);f.InternalSettings.counter+=1}return this},HideElements:function(a){if(f.InternalSettings.counter!==0){if(a==="all"){for(this.a=0;this.a<f.InternalSettings.ResetElements.length;this.a+=1){$(f.InternalSettings.ResetElements[this.a]).removeClass(f.settings.AddClass)}f.InternalSettings.counter=0;f.InternalSettings.NumOfEl=0;f.InternalSettings.ShowElements=[];f.InternalSettings.ResetElements=[];f.GatherElements()}else{try{if(typeof a==="number"){var c=1,pos=f.InternalSettings.ResetElements.length-f.InternalSettings.ShowElements.length;while((a>=c)&&(f.InternalSettings.ShowElements.length<=f.InternalSettings.NumOfEl)){$(f.InternalSettings.ResetElements[pos-c]).removeClass(f.settings.AddClass);f.InternalSettings.ShowElements.splice(0,0,f.InternalSettings.ResetElements[pos-c]);c+=1}}else{$.error("Parameter passed in must be numerical or a string that matches 'all'.")}}catch(e){$.error("Parameter passed in must be numerical or a string that matches 'all'.")}}}return this},Destroy:function(){f.UnbindEvent();f.ResetCounter();f.settings=[];f.InternalSettings={counter:0,ShowElements:[],BoolTimeout:false,NumOfEl:0};return this},GetElementPosition:function(){this.top=f.settings.t.offset().top-f.settings.PixelOffset;this.left=f.settings.t.offset().left;this.width=f.settings.t.width();this.height=f.settings.t.height();return(this.top>=window.pageYOffset&&this.left>=window.pageXOffset&&((this.top+this.height))<=(window.pageYOffset+window.innerHeight)&&(this.left+this.width)<=(window.pageXOffset+window.innerWidth))},DomUpdate:function(){f.InternalSettings.ShowElements=[];f.InternalSettings.ResetElements=[];f.GatherElements()},CheckClassArray:function(a){f.CheckClassArray.el=$(a);if(f.settings.AddClass.indexOf(' ')>0){var b=f.settings.AddClass.split(' ');for(this.c=0;this.c<b.length;this.c+=1){if(f.CheckClassArray.el.hasClass(b[this.c])){return true}}}else{if(f.CheckClassArray.el.hasClass(f.settings.AddClass)){return true}}return false}};$.prototype.ScrollAppear=function(a){if(f[a]){return f[a].apply(this,Array.prototype.slice.call(arguments,1))}if(typeof a==="object"||!a){return f.init.apply(this,arguments)}$.error("Action "+a+" does not exist, ensure you have spelt it correctly along with correct letter case.")};$.each(['append','appendTo','html','prepend','prependTo','after','before','insertBefore','insertAfter','remove','unwrap','wrap','wrapAll','wrapInner'],function(b,c){var d=$.prototype[c];if(d){$.prototype[c]=function(){var a=d.apply(this,arguments);$.prototype.ScrollAppear('DomUpdate');return a}}})}(jQuery));